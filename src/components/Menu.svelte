<script>
    import { ActiveTab, Detail, notifications } from "../store/stores.js";
    import { createEventDispatcher } from "svelte";
    $:messages = $notifications;
    const dispatch = createEventDispatcher();
    const changePage = (tab) => {
        Detail.set()
        ActiveTab.set(tab);
    }
</script>

<section class="menu">
    <div class="content">
        <svg on:click={() => changePage('dashboard')} class:active={$ActiveTab === 'dashboard'} on:keydown={() => {}} class="links wallet" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M4 13H10C10.55 13 11 12.55 11 12V4C11 3.45 10.55 3 10 3H4C3.45 3 3 3.45 3 4V12C3 12.55 3.45 13 4 13ZM4 21H10C10.55 21 11 20.55 11 20V16C11 15.45 10.55 15 10 15H4C3.45 15 3 15.45 3 16V20C3 20.55 3.45 21 4 21ZM14 21H20C20.55 21 21 20.55 21 20V12C21 11.45 20.55 11 20 11H14C13.45 11 13 11.45 13 12V20C13 20.55 13.45 21 14 21ZM13 4V8C13 8.55 13.45 9 14 9H20C20.55 9 21 8.55 21 8V4C21 3.45 20.55 3 20 3H14C13.45 3 13 3.45 13 4Z" fill-opacity='0.6'/>
        </svg>

        <svg on:click={() => changePage('your vehicles')} class:active={$ActiveTab === 'your vehicles'} on:keydown={() => {}} class="links friends" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M4.22222 10.75L5.88889 5.6875H18.1111L19.7778 10.75M18.1111 16.375C17.6691 16.375 17.2452 16.1972 16.9326 15.8807C16.62 15.5643 16.4444 15.1351 16.4444 14.6875C16.4444 14.2399 16.62 13.8107 16.9326 13.4943C17.2452 13.1778 17.6691 13 18.1111 13C18.5531 13 18.9771 13.1778 19.2896 13.4943C19.6022 13.8107 19.7778 14.2399 19.7778 14.6875C19.7778 15.1351 19.6022 15.5643 19.2896 15.8807C18.9771 16.1972 18.5531 16.375 18.1111 16.375ZM5.88889 16.375C5.44686 16.375 5.02294 16.1972 4.71038 15.8807C4.39782 15.5643 4.22222 15.1351 4.22222 14.6875C4.22222 14.2399 4.39782 13.8107 4.71038 13.4943C5.02294 13.1778 5.44686 13 5.88889 13C6.33092 13 6.75484 13.1778 7.0674 13.4943C7.37996 13.8107 7.55556 14.2399 7.55556 14.6875C7.55556 15.1351 7.37996 15.5643 7.0674 15.8807C6.75484 16.1972 6.33092 16.375 5.88889 16.375ZM19.6889 5.125C19.4667 4.4725 18.8444 4 18.1111 4H5.88889C5.15556 4 4.53333 4.4725 4.31111 5.125L2 11.875V20.875C2 21.1734 2.11706 21.4595 2.32544 21.6705C2.53381 21.8815 2.81643 22 3.11111 22H4.22222C4.51691 22 4.79952 21.8815 5.0079 21.6705C5.21627 21.4595 5.33333 21.1734 5.33333 20.875V19.75H18.6667V20.875C18.6667 21.1734 18.7837 21.4595 18.9921 21.6705C19.2005 21.8815 19.4831 22 19.7778 22H20.8889C21.1836 22 21.4662 21.8815 21.6746 21.6705C21.8829 21.4595 22 21.1734 22 20.875V11.875L19.6889 5.125Z" fill-opacity="0.6"/>
        </svg>

        <svg on:click={() => changePage('destroyed vehicles')} class:active={$ActiveTab === 'destroyed vehicles'} on:keydown={() => {}} class="links cards" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M1.69576 17.5098C1.77214 17.8416 1.93441 18.1474 2.1663 18.3966C2.3982 18.6459 2.69156 18.8298 3.01696 18.9299L3.21497 19.8H3.19847V22H20.7998V19.8H6.15C6.16444 19.6983 6.16184 19.595 6.1423 19.4942L5.92668 18.5449L17.3203 15.9533L17.5359 16.9026C17.5933 17.1545 17.7484 17.3732 17.9671 17.5108C18.1857 17.6483 18.45 17.6935 18.702 17.6363L19.6513 17.4196C19.7761 17.3913 19.8941 17.3387 19.9985 17.2647C20.103 17.1908 20.1918 17.097 20.2599 16.9887C20.3281 16.8804 20.3742 16.7597 20.3957 16.6336C20.4172 16.5075 20.4136 16.3783 20.3851 16.2536L20.109 15.0403C20.5996 14.5827 20.846 13.8897 20.6865 13.189L20.0375 10.34C19.9587 9.99676 19.7878 9.68151 19.5432 9.42818C19.2986 9.17484 18.9895 8.99303 18.6492 8.9023L16.3951 5.1865C16.0627 4.64056 15.5672 4.21277 14.9787 3.9635C14.3901 3.71423 13.7381 3.65606 13.1146 3.7972L4.45917 5.7662C3.83507 5.90756 3.27135 6.24186 2.84798 6.72167C2.42462 7.20147 2.16312 7.8024 2.10059 8.4392L1.67486 12.7644C1.40783 12.9937 1.20835 13.2914 1.09787 13.6255C0.987387 13.9596 0.970079 14.3176 1.04781 14.6608L1.69576 17.5098ZM5.01801 16.753C4.831 16.7956 4.63743 16.801 4.44835 16.7688C4.25926 16.7366 4.07837 16.6675 3.916 16.5654C3.75363 16.4633 3.61296 16.3302 3.50202 16.1738C3.39108 16.0173 3.31205 15.8405 3.26943 15.6535C3.22681 15.4666 3.22145 15.273 3.25364 15.0839C3.28583 14.8949 3.35495 14.714 3.45705 14.5516C3.55915 14.3893 3.69224 14.2486 3.8487 14.1377C4.00517 14.0267 4.18195 13.9477 4.36896 13.9051C4.74665 13.819 5.14305 13.8865 5.47098 14.0927C5.7989 14.2989 6.03148 14.6269 6.11755 15.0045C6.20362 15.3822 6.13613 15.7786 5.92992 16.1065C5.72372 16.4344 5.3957 16.6669 5.01801 16.753ZM17.3632 13.9458C17.173 13.9981 16.9741 14.0113 16.7787 13.9847C16.5832 13.958 16.3952 13.8921 16.2259 13.7908C16.0566 13.6896 15.9096 13.5551 15.7937 13.3954C15.6778 13.2358 15.5955 13.0544 15.5516 12.8621C15.5077 12.6698 15.5033 12.4706 15.5385 12.2765C15.5737 12.0824 15.6479 11.8975 15.7565 11.7328C15.8651 11.5682 16.006 11.4272 16.1706 11.3185C16.3351 11.2097 16.52 11.1355 16.7141 11.1001C17.0843 11.0327 17.4663 11.1107 17.7804 11.3179C18.0946 11.5251 18.3166 11.8456 18.4003 12.2124C18.484 12.5793 18.4228 12.9643 18.2296 13.2872C18.0364 13.6102 17.726 13.8461 17.3632 13.9458ZM4.94651 7.9112L13.6031 5.9411C13.7765 5.90191 13.9579 5.91808 14.1217 5.98734C14.2855 6.0566 14.4234 6.17546 14.5161 6.3272L16.2598 9.2015L15.6371 9.3434L4.58568 11.8591L3.96083 12.001L4.28976 8.6548C4.30746 8.47766 4.3804 8.31057 4.49825 8.17713C4.6161 8.0437 4.77291 7.95067 4.94651 7.9112ZM19.0452 2.2L17.4996 0L16.9495 3.3L19.6997 7.7L23 8.8L20.7998 6.0071L23 4.9808L20.7998 3.9545L23 0L19.0452 2.2Z" fill-opacity="0.6"/>
        </svg>

        <svg on:click={() => changePage('notifications')} class:active={$ActiveTab === 'notifications'} on:keydown={() => {}} class="links transfer" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M14.7692 19.5C14.7692 20.2956 14.4775 21.0587 13.9581 21.6213C13.4388 22.1839 12.7344 22.5 12 22.5C11.2656 22.5 10.5612 22.1839 10.0419 21.6213C9.52253 21.0587 9.23077 20.2956 9.23077 19.5H14.7692ZM18.9231 18H3.83077C3.61044 18 3.39913 17.9051 3.24333 17.7364C3.08753 17.5676 3 17.3386 3 17.1C3 16.8613 3.08753 16.6323 3.24333 16.4635C3.39913 16.2948 3.61044 16.1999 3.83077 16.1999H5.07692V10.4999C5.07692 6.86986 7.45846 3.83983 10.6223 3.14983C10.603 2.94126 10.6242 2.73061 10.6847 2.53148C10.7451 2.33235 10.8434 2.14915 10.9732 1.9937C11.103 1.83826 11.2614 1.71401 11.4383 1.62897C11.6152 1.54393 11.8065 1.5 12 1.5C12.1935 1.5 12.3848 1.54393 12.5617 1.62897C12.7386 1.71401 12.897 1.83826 13.0268 1.9937C13.1566 2.14915 13.2549 2.33235 13.3153 2.53148C13.3758 2.73061 13.397 2.94126 13.3777 3.14983C14.9425 3.49463 16.3492 4.41461 17.3597 5.75402C18.3703 7.09343 18.9226 8.77 18.9231 10.4999V16.1999H20.1692C20.3896 16.1999 20.6009 16.2948 20.7567 16.4635C20.9125 16.6323 21 16.8613 21 17.1C21 17.3386 20.9125 17.5676 20.7567 17.7364C20.6009 17.9051 20.3896 18 20.1692 18H18.9231Z" fill-opacity="0.6"/>
            {#if messages.length > 0}
            <circle cx="18" cy="5" r="3" fill="#FF7A70"/>
            {/if}
        </svg>
    </div>
</section>

<style>
    .menu {
        position: absolute;
        width: 100%;
        background: #379F8D;
        transition: all 0.3s ease;
        pointer-events: all;
        opacity: 1;
        z-index: 10;
        left: 0;
        bottom: 0;
        height: 70px;
        box-shadow: 2px 0px 65px 0px rgba(0, 0, 0, 0.85);
        transition: all .3s ease;
    }
    .menu .content {
        display: flex;
        justify-content: space-between;
        width: 78.92%;
        margin: 0 auto;
        padding: 16px 15px 30px 15px;
        transition: all 0.3s ease;
    }
    .menu svg{
        cursor: pointer;
        transition: all .2s ease;
    }
    .links path{
        transition: all .2s ease;
        fill: white;
    }
    .links:hover path{
        fill: #84FFE9;
    }
    .active path{
        fill-opacity: 1;
    }
    .active:hover path{
        fill: white;
    }
</style>
